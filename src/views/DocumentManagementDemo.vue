<template>
  <div class="document-management-demo">
    <div class="page-header">
      <h1>æ–‡æ¡£ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½æ¼”ç¤º</h1>
      <p>ä½“éªŒæ–‡æ¡£ç‰ˆæœ¬æ§åˆ¶ã€ç‰ˆæœ¬å¯¹æ¯”ã€å®¡æ‰¹æµç¨‹ã€ç”µå­ç­¾åç­‰åŠŸèƒ½</p>
    </div>

    <!-- åŠŸèƒ½ä»‹ç» -->
    <el-card class="feature-intro">
      <template #header>
        <h2>âœ¨ æ–°åŠŸèƒ½äº®ç‚¹</h2>
      </template>
      <el-row :gutter="20">
        <el-col :span="6">
          <div class="feature-item">
            <el-icon class="feature-icon"><DocumentIcon /></el-icon>
            <h3>ç‰ˆæœ¬æ§åˆ¶</h3>
            <p>å®Œæ•´çš„æ–‡æ¡£ç‰ˆæœ¬ç®¡ç†ï¼Œæ”¯æŒç‰ˆæœ¬å†å²ã€ç‰ˆæœ¬æ¢å¤ã€ç‰ˆæœ¬å¯¹æ¯”</p>
          </div>
        </el-col>
        <el-col :span="6">
          <div class="feature-item">
            <el-icon class="feature-icon"><DocumentCopy /></el-icon>
            <h3>ç‰ˆæœ¬å¯¹æ¯”</h3>
            <p>ç›´è§‚çš„ç‰ˆæœ¬å·®å¼‚å¯¹æ¯”ï¼Œæ”¯æŒæ–‡ä»¶å†…å®¹ã€å…ƒæ•°æ®ç­‰å¤šç»´åº¦å¯¹æ¯”</p>
          </div>
        </el-col>
        <el-col :span="6">
          <div class="feature-item">
            <el-icon class="feature-icon"><CircleCheck /></el-icon>
            <h3>å®¡æ‰¹æµç¨‹</h3>
            <p>å¯é…ç½®çš„å®¡æ‰¹å·¥ä½œæµï¼Œæ”¯æŒå¤šçº§å®¡æ‰¹ã€å¹¶è¡Œå®¡æ‰¹ã€æ—¶é—´é™åˆ¶</p>
          </div>
        </el-col>
        <el-col :span="6">
          <div class="feature-item">
            <el-icon class="feature-icon"><EditPen /></el-icon>
            <h3>ç”µå­ç­¾å</h3>
            <p>å¤šç§ç­¾åæ–¹å¼ï¼šæ‰‹ç»˜ç­¾åã€æ–‡å­—ç­¾åã€æ•°å­—è¯ä¹¦ç­¾å</p>
          </div>
        </el-col>
      </el-row>
    </el-card>

    <!-- æ¼”ç¤ºåŒºåŸŸ -->
    <el-card class="demo-area">
      <template #header>
        <h2>ğŸ¯ åŠŸèƒ½æ¼”ç¤º</h2>
      </template>

      <el-tabs v-model="activeTab" type="border-card">
        <!-- ç‰ˆæœ¬ç®¡ç†æ¼”ç¤º -->
        <el-tab-pane label="ç‰ˆæœ¬ç®¡ç†" name="version">
          <div class="demo-section">
            <h3>1. æ–‡æ¡£ç‰ˆæœ¬ç®¡ç†</h3>
            <p>å±•ç¤ºå®Œæ•´çš„æ–‡æ¡£ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸Šä¼ ã€ä¸‹è½½ã€æ¢å¤ç­‰æ“ä½œï¼š</p>
            <DocumentVersionManager :document-id="demoDocumentId" />
          </div>
        </el-tab-pane>

        <!-- ç‰ˆæœ¬å¯¹æ¯”æ¼”ç¤º -->
        <el-tab-pane label="ç‰ˆæœ¬å¯¹æ¯”" name="compare">
          <div class="demo-section">
            <h3>2. ç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½</h3>
            <p>é€‰æ‹©ä¸¤ä¸ªç‰ˆæœ¬è¿›è¡Œè¯¦ç»†å¯¹æ¯”ï¼ŒæŸ¥çœ‹å·®å¼‚å’Œç›¸ä¼¼åº¦ï¼š</p>
            <DocumentVersionCompare :document-id="demoDocumentId" />
          </div>
        </el-tab-pane>

        <!-- å®¡æ‰¹æµç¨‹æ¼”ç¤º -->
        <el-tab-pane label="å®¡æ‰¹æµç¨‹" name="approval">
          <div class="demo-section">
            <h3>3. å®¡æ‰¹æµç¨‹ç®¡ç†</h3>
            <p>ä½“éªŒå®Œæ•´çš„æ–‡æ¡£å®¡æ‰¹æµç¨‹ï¼ŒåŒ…æ‹¬å¯åŠ¨å®¡æ‰¹ã€æ‰¹å‡†ã€æ‹’ç»ç­‰æ“ä½œï¼š</p>
            <div v-if="demoVersion">
              <DocumentApprovalFlow :document-version="demoVersion" />
            </div>
            <div v-else class="no-version">
              <el-empty description="è¯·å…ˆä¸Šä¼ æ–‡æ¡£ç‰ˆæœ¬ä»¥ä½“éªŒå®¡æ‰¹æµç¨‹" />
            </div>
          </div>
        </el-tab-pane>

        <!-- ç”µå­ç­¾åæ¼”ç¤º -->
        <el-tab-pane label="ç”µå­ç­¾å" name="signature">
          <div class="demo-section">
            <h3>4. ç”µå­ç­¾ååŠŸèƒ½</h3>
            <p>ä½“éªŒå¤šç§ç”µå­ç­¾åæ–¹å¼ï¼š</p>
            <div class="signature-demo">
              <el-button type="primary" @click="showSignatureDialog = true">
                <el-icon><EditPen /></el-icon>
                åˆ›å»ºç”µå­ç­¾å
              </el-button>

              <div v-if="demoSignatures.length > 0" class="signatures-list">
                <h4>å·²åˆ›å»ºçš„ç­¾åï¼š</h4>
                <div
                  v-for="signature in demoSignatures"
                  :key="signature.id"
                  class="signature-item"
                >
                  <div class="signature-info">
                    <div>
                      <strong>ç­¾åè€…:</strong> {{ signature.signerName }}
                    </div>
                    <div>
                      <strong>ç­¾åç±»å‹:</strong>
                      {{ getSignatureTypeText(signature.signatureType) }}
                    </div>
                    <div>
                      <strong>ç­¾åæ—¶é—´:</strong>
                      {{ formatDate(signature.signedAt) }}
                    </div>
                  </div>
                  <div class="signature-preview">
                    <img
                      v-if="signature.signatureData.startsWith('data:image')"
                      :src="signature.signatureData"
                      alt="ç­¾åé¢„è§ˆ"
                      style="max-width: 200px; max-height: 60px"
                    />
                    <div v-else class="text-signature">
                      {{ signature.signerName }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </el-tab-pane>

        <!-- å·¥ä½œæµé…ç½®æ¼”ç¤º -->
        <el-tab-pane label="å·¥ä½œæµé…ç½®" name="workflow">
          <div class="demo-section">
            <h3>5. å®¡æ‰¹å·¥ä½œæµé…ç½®</h3>
            <p>æŸ¥çœ‹å’Œé…ç½®å®¡æ‰¹å·¥ä½œæµï¼š</p>
            <div class="workflow-demo">
              <div class="workflow-list">
                <h4>å¯ç”¨çš„å·¥ä½œæµï¼š</h4>
                <div
                  v-for="workflow in availableWorkflows"
                  :key="workflow.id"
                  class="workflow-item"
                >
                  <div class="workflow-header">
                    <h5>{{ workflow.name }}</h5>
                    <el-tag :type="workflow.isActive ? 'success' : 'info'">
                      {{ workflow.isActive ? "å¯ç”¨" : "ç¦ç”¨" }}
                    </el-tag>
                  </div>
                  <p>{{ workflow.description }}</p>
                  <div class="workflow-steps">
                    <div
                      v-for="step in workflow.steps"
                      :key="step.id"
                      class="step-item"
                    >
                      <div class="step-number">{{ step.stepNumber }}</div>
                      <div class="step-info">
                        <div class="step-name">{{ step.name }}</div>
                        <div class="step-roles">
                          <el-tag
                            v-for="role in step.approverRoles"
                            :key="role"
                            size="small"
                          >
                            {{ getRoleText(role) }}
                          </el-tag>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <el-button type="primary" @click="createCustomWorkflow">
                <el-icon><Plus /></el-icon>
                åˆ›å»ºè‡ªå®šä¹‰å·¥ä½œæµ
              </el-button>
            </div>
          </div>
        </el-tab-pane>
      </el-tabs>
    </el-card>

    <!-- ç³»ç»Ÿç»Ÿè®¡ -->
    <el-card class="stats-section">
      <template #header>
        <h2>ğŸ“Š ç³»ç»Ÿç»Ÿè®¡</h2>
      </template>
      <el-row :gutter="20">
        <el-col :span="6">
          <div class="stat-item">
            <div class="stat-number">{{ documentStats.totalVersions }}</div>
            <div class="stat-label">æ–‡æ¡£ç‰ˆæœ¬æ•°</div>
          </div>
        </el-col>
        <el-col :span="6">
          <div class="stat-item">
            <div class="stat-number">{{ documentStats.pendingApprovals }}</div>
            <div class="stat-label">å¾…å®¡æ‰¹</div>
          </div>
        </el-col>
        <el-col :span="6">
          <div class="stat-item">
            <div class="stat-number">
              {{ formatFileSize(documentStats.storageUsed) }}
            </div>
            <div class="stat-label">å­˜å‚¨ä½¿ç”¨</div>
          </div>
        </el-col>
        <el-col :span="6">
          <div class="stat-item">
            <div class="stat-number">{{ documentStats.recentActivity }}</div>
            <div class="stat-label">è¿‘æœŸæ´»åŠ¨</div>
          </div>
        </el-col>
      </el-row>

      <!-- çŠ¶æ€åˆ†å¸ƒ -->
      <div class="status-distribution">
        <h4>æ–‡æ¡£çŠ¶æ€åˆ†å¸ƒï¼š</h4>
        <el-row :gutter="12">
          <el-col
            v-for="(count, status) in documentStats.byStatus"
            :key="status"
            :span="4"
          >
            <div class="status-card">
              <div class="status-count">{{ count }}</div>
              <div class="status-name">{{ getStatusText(status) }}</div>
            </div>
          </el-col>
        </el-row>
      </div>
    </el-card>

    <!-- æµ‹è¯•åŠŸèƒ½ -->
    <el-card class="test-section">
      <template #header>
        <h2>ğŸ§ª æµ‹è¯•åŠŸèƒ½</h2>
      </template>
      <div class="test-actions">
        <el-button @click="addTestDocumentVersions">
          æ·»åŠ æµ‹è¯•æ–‡æ¡£ç‰ˆæœ¬
        </el-button>
        <el-button @click="clearAllData" type="danger">
          æ¸…ç©ºæ‰€æœ‰æ•°æ®
        </el-button>
        <el-button @click="exportDocumentData"> å¯¼å‡ºæ–‡æ¡£æ•°æ® </el-button>
        <el-button @click="showImportDialog = true"> å¯¼å…¥æ–‡æ¡£æ•°æ® </el-button>
      </div>
    </el-card>

    <!-- ç”µå­ç­¾åå¯¹è¯æ¡† -->
    <ElectronicSignature
      v-model="showSignatureDialog"
      @signature-created="handleSignatureCreated"
    />

    <!-- å¯¼å…¥å¯¹è¯æ¡† -->
    <el-dialog v-model="showImportDialog" title="å¯¼å…¥æ–‡æ¡£æ•°æ®" width="500px">
      <el-input
        v-model="importData"
        type="textarea"
        rows="10"
        placeholder="è¯·ç²˜è´´å¯¼å‡ºçš„JSONæ•°æ®"
      />
      <template #footer>
        <el-button @click="showImportDialog = false">å–æ¶ˆ</el-button>
        <el-button type="primary" @click="importDocumentData">å¯¼å…¥</el-button>
      </template>
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from "vue";
import { useDocumentStore } from "@/stores/document";
import { useUserStore } from "@/stores/user";
import { ElMessage, ElMessageBox } from "element-plus";
import {
  Document,
  DocumentCopy,
  CircleCheck,
  EditPen,
  Plus,
} from "@element-plus/icons-vue";
import DocumentVersionManager from "@/components/DocumentVersionManager.vue";
import DocumentVersionCompare from "@/components/DocumentVersionCompare.vue";
import DocumentApprovalFlow from "@/components/DocumentApprovalFlow.vue";
import ElectronicSignature from "@/components/ElectronicSignature.vue";
import type { ElectronicSignature as ElectronicSignatureType } from "@/types/document";

// Store
const documentStore = useDocumentStore();
const userStore = useUserStore();

// å“åº”å¼æ•°æ®
const activeTab = ref("version");
const demoDocumentId = ref("demo-document-001");
const showSignatureDialog = ref(false);
const showImportDialog = ref(false);
const importData = ref("");
const demoSignatures = ref<ElectronicSignatureType[]>([]);

// è®¡ç®—å±æ€§
const documentStats = computed(() => documentStore.documentStats);
const availableWorkflows = computed(() => documentStore.approvalWorkflows);

const demoVersion = computed(() => {
  const versions = documentStore.documentVersions.filter(
    (v) => v.documentId === demoDocumentId.value
  );
  return versions.find((v) => v.isLatest) || versions[0] || null;
});

// æ–¹æ³•
const handleSignatureCreated = (signature: ElectronicSignatureType) => {
  demoSignatures.value.push(signature);
  ElMessage.success("ç”µå­ç­¾ååˆ›å»ºæˆåŠŸ");
};

const getSignatureTypeText = (type: string) => {
  const typeMap = {
    drawn: "æ‰‹ç»˜ç­¾å",
    typed: "æ–‡å­—ç­¾å",
    digital: "æ•°å­—è¯ä¹¦",
  };
  return typeMap[type as keyof typeof typeMap] || type;
};

const getRoleText = (role: string) => {
  const roleMap = {
    admin: "ç®¡ç†å‘˜",
    reviewer: "å®¡æ ¸å‘˜",
    user: "æ™®é€šç”¨æˆ·",
  };
  return roleMap[role as keyof typeof roleMap] || role;
};

const getStatusText = (status: string) => {
  const statusMap = {
    draft: "è‰ç¨¿",
    pending: "å¾…å®¡æ‰¹",
    approved: "å·²æ‰¹å‡†",
    rejected: "å·²æ‹’ç»",
    archived: "å·²å½’æ¡£",
    obsolete: "å·²è¿‡æ—¶",
  };
  return statusMap[status as keyof typeof statusMap] || status;
};

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleString("zh-CN");
};

const formatFileSize = (bytes: number) => {
  if (bytes === 0) return "0 B";
  const k = 1024;
  const sizes = ["B", "KB", "MB", "GB"];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
};

const addTestDocumentVersions = async () => {
  try {
    // åˆ›å»ºæ¨¡æ‹Ÿæ–‡ä»¶
    const testFiles = [
      { name: "ä¸“åˆ©ç”³è¯·ä¹¦.pdf", size: 1024 * 500, type: "application/pdf" },
      {
        name: "æŠ€æœ¯è¯´æ˜ä¹¦.docx",
        size: 1024 * 300,
        type: "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
      },
      { name: "æƒåˆ©è¦æ±‚ä¹¦.pdf", size: 1024 * 200, type: "application/pdf" },
      { name: "ä¿®æ”¹è¯´æ˜.txt", size: 1024 * 50, type: "text/plain" },
    ];

    for (let i = 0; i < testFiles.length; i++) {
      const fileInfo = testFiles[i];

      // åˆ›å»ºæ¨¡æ‹ŸFileå¯¹è±¡
      const blob = new Blob(["æµ‹è¯•æ–‡æ¡£å†…å®¹".repeat(fileInfo.size / 20)], {
        type: fileInfo.type,
      });
      const file = new File([blob], fileInfo.name, { type: fileInfo.type });

      await documentStore.uploadDocumentVersion(
        demoDocumentId.value,
        file,
        `è¿™æ˜¯ç¬¬${i + 1}ä¸ªæµ‹è¯•æ–‡æ¡£ç‰ˆæœ¬`,
        i > 0 ? `åŸºäºç‰ˆæœ¬${i}çš„æ›´æ–°` : "åˆå§‹ç‰ˆæœ¬"
      );
    }

    ElMessage.success("æµ‹è¯•æ–‡æ¡£ç‰ˆæœ¬æ·»åŠ å®Œæˆ");
  } catch (error) {
    ElMessage.error("æ·»åŠ æµ‹è¯•æ•°æ®å¤±è´¥: " + (error as Error).message);
  }
};

const clearAllData = async () => {
  try {
    await ElMessageBox.confirm(
      "ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ–‡æ¡£æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚",
      "ç¡®è®¤æ¸…ç©º",
      {
        confirmButtonText: "ç¡®å®š",
        cancelButtonText: "å–æ¶ˆ",
        type: "warning",
      }
    );

    documentStore.documentVersions.splice(0);
    documentStore.versionHistories.splice(0);
    documentStore.approvalProcesses.splice(0);
    documentStore.signatures.splice(0);
    documentStore.activityLogs.splice(0);
    demoSignatures.value = [];

    documentStore.saveToStorage();
    ElMessage.success("æ‰€æœ‰æ•°æ®å·²æ¸…ç©º");
  } catch {
    // ç”¨æˆ·å–æ¶ˆ
  }
};

const exportDocumentData = () => {
  const data = {
    documentVersions: documentStore.documentVersions,
    versionHistories: documentStore.versionHistories,
    approvalWorkflows: documentStore.approvalWorkflows,
    approvalProcesses: documentStore.approvalProcesses,
    signatures: documentStore.signatures,
    activityLogs: documentStore.activityLogs,
    demoSignatures: demoSignatures.value,
    exportDate: new Date().toISOString(),
  };

  const blob = new Blob([JSON.stringify(data, null, 2)], {
    type: "application/json",
  });
  const url = URL.createObjectURL(blob);
  const link = document.createElement("a");
  link.href = url;
  link.download = `document-data-${new Date().toISOString().slice(0, 10)}.json`;
  link.click();
  URL.revokeObjectURL(url);

  ElMessage.success("æ–‡æ¡£æ•°æ®å·²å¯¼å‡º");
};

const importDocumentData = () => {
  if (!importData.value.trim()) {
    ElMessage.warning("è¯·è¾“å…¥è¦å¯¼å…¥çš„æ•°æ®");
    return;
  }

  try {
    const data = JSON.parse(importData.value);

    if (data.documentVersions) {
      documentStore.documentVersions.splice(
        0,
        documentStore.documentVersions.length,
        ...data.documentVersions
      );
    }
    if (data.versionHistories) {
      documentStore.versionHistories.splice(
        0,
        documentStore.versionHistories.length,
        ...data.versionHistories
      );
    }
    if (data.approvalProcesses) {
      documentStore.approvalProcesses.splice(
        0,
        documentStore.approvalProcesses.length,
        ...data.approvalProcesses
      );
    }
    if (data.signatures) {
      documentStore.signatures.splice(
        0,
        documentStore.signatures.length,
        ...data.signatures
      );
    }
    if (data.activityLogs) {
      documentStore.activityLogs.splice(
        0,
        documentStore.activityLogs.length,
        ...data.activityLogs
      );
    }
    if (data.demoSignatures) {
      demoSignatures.value = data.demoSignatures;
    }

    documentStore.saveToStorage();

    ElMessage.success("æ–‡æ¡£æ•°æ®å¯¼å…¥æˆåŠŸ");
    showImportDialog.value = false;
    importData.value = "";
  } catch (error) {
    ElMessage.error("å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æ ¼å¼");
  }
};

const createCustomWorkflow = () => {
  const customWorkflow = documentStore.createApprovalWorkflow({
    type: "sequential",
    category: "patent",
    priority: "medium",
    version: "1.0",
    name: "è‡ªå®šä¹‰å®¡æ‰¹æµç¨‹",
    description: "è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„å®¡æ‰¹å·¥ä½œæµç¨‹",
    steps: [
      {
        id: "custom-step-1",
        stepNumber: 1,
        name: "åˆæ­¥å®¡æŸ¥",
        description: "æ–‡æ¡£åˆæ­¥å®¡æŸ¥å’Œæ ¼å¼æ£€æŸ¥",
        approverRoles: ["reviewer"],
        isRequired: true,
        allowParallel: false,
        timeLimit: 24,
      },
      {
        id: "custom-step-2",
        stepNumber: 2,
        name: "æŠ€æœ¯å®¡æŸ¥",
        description: "æŠ€æœ¯å†…å®¹å®¡æŸ¥å’ŒéªŒè¯",
        approverRoles: ["reviewer", "admin"],
        isRequired: true,
        allowParallel: true,
        timeLimit: 48,
      },
      {
        id: "custom-step-3",
        stepNumber: 3,
        name: "æœ€ç»ˆæ‰¹å‡†",
        description: "æœ€ç»ˆå®¡æ‰¹å’Œç­¾å‘",
        approverRoles: ["admin"],
        isRequired: true,
        allowParallel: false,
        timeLimit: 72,
      },
    ],
    isActive: true,
    createdBy: userStore.currentUser?.id || 1,
  });

  ElMessage.success(`è‡ªå®šä¹‰å·¥ä½œæµ "${customWorkflow.name}" åˆ›å»ºæˆåŠŸ`);
};

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  // åˆå§‹åŒ–æ¼”ç¤ºæ•°æ®
  if (documentStore.documentVersions.length === 0) {
    ElMessage.info('æ£€æµ‹åˆ°æ²¡æœ‰æ–‡æ¡£æ•°æ®ï¼Œå¯ä»¥ç‚¹å‡»"æ·»åŠ æµ‹è¯•æ–‡æ¡£ç‰ˆæœ¬"æ¥ä½“éªŒåŠŸèƒ½');
  }
});
</script>

<style scoped>
.document-management-demo {
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;
}

.page-header {
  text-align: center;
  margin-bottom: 30px;
}

.page-header h1 {
  color: #2c3e50;
  margin-bottom: 8px;
}

.page-header p {
  color: #666;
  font-size: 16px;
}

.feature-intro,
.demo-area,
.stats-section,
.test-section {
  margin-bottom: 30px;
}

.feature-item {
  text-align: center;
  padding: 20px;
}

.feature-icon {
  font-size: 32px;
  color: #409eff;
  margin-bottom: 12px;
}

.feature-item h3 {
  margin: 12px 0 8px 0;
  color: #2c3e50;
}

.feature-item p {
  color: #666;
  font-size: 14px;
  line-height: 1.5;
}

.demo-section {
  margin-bottom: 30px;
}

.demo-section h3 {
  color: #2c3e50;
  margin-bottom: 8px;
}

.demo-section p {
  color: #666;
  margin-bottom: 16px;
}

.signature-demo {
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
}

.signatures-list {
  margin-top: 20px;
}

.signatures-list h4 {
  margin-bottom: 12px;
  color: #2c3e50;
}

.signature-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  margin-bottom: 8px;
  background: white;
  border-radius: 4px;
  border: 1px solid #e4e7ed;
}

.signature-info {
  flex: 1;
  font-size: 14px;
}

.signature-preview {
  margin-left: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 200px;
  min-height: 60px;
  background: #f8f9fa;
  border: 1px solid #e4e7ed;
  border-radius: 4px;
}

.text-signature {
  font-size: 24px;
  font-weight: bold;
  color: #2c3e50;
}

.workflow-demo {
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
}

.workflow-list h4 {
  margin-bottom: 16px;
  color: #2c3e50;
}

.workflow-item {
  margin-bottom: 20px;
  padding: 16px;
  background: white;
  border-radius: 8px;
  border: 1px solid #e4e7ed;
}

.workflow-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.workflow-header h5 {
  margin: 0;
  color: #2c3e50;
}

.workflow-steps {
  display: flex;
  gap: 16px;
  margin-top: 12px;
  overflow-x: auto;
}

.step-item {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 150px;
  padding: 8px;
  background: #f0f9ff;
  border-radius: 4px;
  border: 1px solid #b3d8ff;
}

.step-number {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #409eff;
  color: white;
  border-radius: 50%;
  font-size: 12px;
  font-weight: bold;
  flex-shrink: 0;
}

.step-info {
  flex: 1;
}

.step-name {
  font-weight: 500;
  font-size: 12px;
  color: #2c3e50;
  margin-bottom: 4px;
}

.step-roles {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
}

.stat-number {
  font-size: 2em;
  font-weight: bold;
  color: #409eff;
  margin-bottom: 8px;
}

.stat-label {
  color: #666;
  font-size: 14px;
}

.status-distribution {
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid #e4e7ed;
}

.status-distribution h4 {
  margin-bottom: 16px;
  color: #2c3e50;
}

.status-card {
  text-align: center;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 4px;
  border: 1px solid #e4e7ed;
}

.status-count {
  font-size: 1.5em;
  font-weight: bold;
  color: #409eff;
  margin-bottom: 4px;
}

.status-name {
  font-size: 12px;
  color: #666;
}

.test-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.no-version {
  padding: 40px;
  text-align: center;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .document-management-demo {
    padding: 16px;
  }

  .workflow-steps {
    flex-direction: column;
  }

  .test-actions {
    flex-direction: column;
  }

  .signature-item {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }

  .signature-preview {
    margin-left: 0;
  }
}
</style>
