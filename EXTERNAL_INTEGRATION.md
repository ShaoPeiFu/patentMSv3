# 外部系统集成功能

## 概述

专利管理系统现已支持与外部系统的集成，包括专利局 API、邮件系统、第三方数据库和企业 ERP 系统。这些集成功能可以帮助用户自动化数据同步、通知发送和业务流程管理。

## 功能特性

### 1. 专利局 API 集成

- **支持的专利局**：

  - 中国专利局 (CNIPA)
  - 美国专利局 (USPTO)
  - 欧洲专利局 (EPO)
  - 日本专利局 (JPO)
  - 韩国专利局 (KIPO)

- **主要功能**：
  - 专利状态查询
  - 专利申请信息同步
  - 专利法律状态更新
  - 专利检索和监控

### 2. 邮件系统集成

- **支持的邮件提供商**：

  - SMTP
  - IMAP
  - Exchange
  - Gmail
  - Outlook

- **主要功能**：
  - 自动通知发送
  - 专利状态变更提醒
  - 期限到期警告
  - 批量邮件发送

### 3. 第三方数据库集成

- **支持的数据库类型**：

  - MySQL
  - PostgreSQL
  - Oracle
  - SQL Server
  - MongoDB

- **主要功能**：
  - 数据导入/导出
  - 实时数据同步
  - 数据映射配置
  - 同步日志记录

### 4. 企业 ERP 集成

- **支持的 ERP 系统**：

  - SAP
  - Oracle ERP
  - SAP Business One
  - NetSuite
  - Microsoft Dynamics

- **主要功能**：
  - 财务数据同步
  - 人力资源数据集成
  - 采购流程对接
  - 项目管理集成

## 使用方法

### 1. 访问集成管理页面

1. 登录系统后，在左侧导航栏点击"外部系统集成"
2. 进入集成管理页面，可以看到四个主要模块

### 2. 配置专利局 API

1. 在"专利局 API"模块中点击"添加配置"
2. 填写配置信息：

   - 名称：配置的显示名称
   - 专利局：选择对应的专利局
   - 基础 URL：API 的基础地址
   - API 密钥：访问 API 的密钥
   - 密钥：API 的密钥
   - 同步间隔：数据同步的时间间隔（分钟）

3. 点击"确定"保存配置
4. 点击"测试"按钮验证连接是否正常

### 3. 配置邮件系统

1. 在"邮件系统"模块中点击"添加配置"
2. 填写配置信息：

   - 名称：配置的显示名称
   - 提供商：选择邮件服务提供商
   - 主机：邮件服务器地址
   - 端口：邮件服务器端口
   - 用户名：邮箱用户名
   - 密码：邮箱密码
   - 加密：选择加密方式（无/SSL/TLS）

3. 点击"确定"保存配置
4. 点击"测试"按钮验证连接是否正常

### 4. 配置第三方数据库

1. 在"第三方数据库"模块中点击"添加配置"
2. 填写配置信息：

   - 名称：配置的显示名称
   - 类型：选择数据库类型
   - 主机：数据库服务器地址
   - 端口：数据库端口
   - 数据库：数据库名称
   - 用户名：数据库用户名
   - 密码：数据库密码
   - 同步方向：选择数据同步方向
   - 同步表：选择需要同步的数据表

3. 点击"确定"保存配置
4. 点击"测试"按钮验证连接是否正常

### 5. 配置企业 ERP

1. 在"企业 ERP"模块中点击"添加配置"
2. 填写配置信息：

   - 名称：配置的显示名称
   - 系统：选择 ERP 系统类型
   - 基础 URL：ERP 系统的基础地址
   - API 端点：API 端点路径
   - 用户名：ERP 系统用户名
   - 密码：ERP 系统密码
   - 模块：选择需要集成的模块

3. 点击"确定"保存配置
4. 点击"测试"按钮验证连接是否正常

## 监控和管理

### 1. 同步任务监控

- 在"同步任务监控"标签页中查看所有同步任务的状态
- 可以查看任务的进度、处理记录数和执行时间
- 支持手动触发同步任务

### 2. 集成日志

- 在"集成日志"标签页中查看所有集成操作的日志
- 支持按日志级别和集成类型进行筛选
- 可以查看详细的错误信息和操作结果

### 3. 统计信息

- 查看总配置数、活跃配置数、失败配置数等统计信息
- 监控平均响应时间和成功率
- 查看今日同步任务数和错误数

## 权限管理

### 管理员权限

- 可以添加、编辑、删除所有类型的集成配置
- 可以查看所有同步任务和日志
- 可以管理所有集成统计信息

### 普通用户权限

- 只能查看集成配置列表
- 可以查看同步任务状态
- 可以查看集成日志（只读）

## 测试功能

系统提供了完整的测试页面，可以通过以下路径访问：
`/dashboard/test-integration`

测试页面包含：

- 专利局 API 测试
- 邮件系统测试
- 数据库集成测试
- ERP 系统测试
- 集成统计显示
- 集成日志查看

## 注意事项

1. **安全性**：所有敏感信息（如 API 密钥、密码）都会进行加密存储
2. **性能**：建议合理设置同步间隔，避免过于频繁的 API 调用
3. **监控**：定期检查集成日志，及时发现和解决问题
4. **备份**：重要配置建议定期备份
5. **测试**：在生产环境使用前，建议在测试环境充分验证

## 故障排除

### 常见问题

1. **连接失败**

   - 检查网络连接
   - 验证配置信息是否正确
   - 确认 API 密钥是否有效

2. **同步失败**

   - 检查数据格式是否正确
   - 确认权限是否足够
   - 查看详细错误日志

3. **性能问题**
   - 调整同步间隔
   - 优化数据查询
   - 检查网络带宽

### 技术支持

如遇到问题，请：

1. 查看集成日志获取详细错误信息
2. 检查配置是否正确
3. 联系系统管理员获取技术支持

## 更新日志

### v1.0.0 (2024-01-15)

- 初始版本发布
- 支持专利局 API 集成
- 支持邮件系统集成
- 支持第三方数据库集成
- 支持企业 ERP 集成
- 提供完整的监控和管理功能
