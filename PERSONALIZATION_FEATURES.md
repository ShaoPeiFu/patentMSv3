# 个性化设置功能实现

## 功能概述

本系统实现了完整的个性化设置功能，包括自定义仪表板、个人工作台、快捷操作栏和主题定制，为用户提供个性化的使用体验。

## 主要功能

### 1. 主题定制 🎨

#### 功能特点

- **多种预设主题**: 浅色、深色、蓝色、绿色主题
- **自定义主题**: 支持用户创建个性化主题
- **实时预览**: 主题切换时实时预览效果
- **自动切换**: 支持根据时间自动切换主题

#### 实现文件

- `src/views/PersonalizationSettings.vue` - 主题设置页面
- `src/stores/personalization.ts` - 主题管理状态

#### 使用方法

1. 进入个性化设置页面
2. 选择"主题定制"标签页
3. 选择预设主题或创建自定义主题
4. 实时预览主题效果
5. 保存设置

### 2. 自定义仪表板 📊

#### 功能特点

- **多种布局**: 网格布局、列表布局、看板布局
- **组件化设计**: 支持添加、编辑、删除组件
- **拖拽排序**: 支持组件拖拽重新排序
- **组件类型**: 数据指标、图表、列表、自定义组件

#### 实现文件

- `src/components/PersonalWorkspace.vue` - 个人工作台组件
- `src/components/widgets/` - 各种组件实现

#### 可用组件

- **专利概览组件**: 显示专利统计信息
- **最近专利组件**: 显示最近的专利列表
- **专利图表组件**: 专利数据可视化
- **快捷操作组件**: 常用操作快捷入口

### 3. 快捷操作栏 ⚡

#### 功能特点

- **多位置显示**: 顶部、底部、左侧、右侧
- **可折叠设计**: 支持展开/收起操作
- **权限控制**: 根据用户权限显示操作
- **工具提示**: 紧凑模式下显示工具提示

#### 实现文件

- `src/components/QuickActionBar.vue` - 快捷操作栏组件

#### 默认快捷操作

- 控制台
- 专利管理
- 添加专利
- 统计报表
- 系统设置

### 4. 个人工作台 🏠

#### 功能特点

- **多工作台支持**: 创建多个个性化工作台
- **工作台切换**: 在不同工作台间切换
- **组件管理**: 添加、编辑、删除工作台组件
- **布局定制**: 支持网格、列表、看板布局

#### 实现文件

- `src/components/PersonalWorkspace.vue` - 个人工作台组件

## 技术实现

### 状态管理

使用 Pinia 进行状态管理，主要文件：

- `src/stores/personalization.ts` - 个性化设置状态管理

### 数据结构

```typescript
interface PersonalizationSettings {
  theme: {
    currentTheme: string;
    customTheme: Theme | null;
    autoSwitch: boolean;
    preferredTheme: "light" | "dark" | "auto";
  };
  dashboard: {
    layout: "grid" | "list" | "kanban";
    widgets: DashboardWidget[];
    defaultWorkspace: string;
    workspaces: PersonalWorkspace[];
  };
  quickActions: {
    enabled: boolean;
    position: "top" | "bottom" | "left" | "right";
    actions: QuickAction[];
    maxVisible: number;
  };
  // ... 其他设置
}
```

### 组件架构

```
src/components/
├── QuickActionBar.vue          # 快捷操作栏
├── PersonalWorkspace.vue       # 个人工作台
└── widgets/
    ├── PatentOverviewWidget.vue    # 专利概览组件
    ├── RecentPatentsWidget.vue     # 最近专利组件
    ├── PatentChartWidget.vue       # 专利图表组件
    └── QuickActionsWidget.vue      # 快捷操作组件
```

## 使用方法

### 1. 访问个性化设置

```
路径: /dashboard/personalization
```

### 2. 主题设置

1. 选择"主题定制"标签页
2. 选择预设主题或点击"自定义主题"
3. 调整颜色配置
4. 保存设置

### 3. 仪表板定制

1. 选择"仪表板定制"标签页
2. 选择布局类型
3. 点击"添加组件"添加新组件
4. 拖拽调整组件位置
5. 保存设置

### 4. 快捷操作设置

1. 选择"快捷操作"标签页
2. 启用/禁用快捷操作
3. 调整显示位置和数量
4. 保存设置

### 5. 工作台管理

1. 选择"工作台设置"标签页
2. 创建工作台
3. 添加组件到工作台
4. 切换不同工作台

## 测试功能

### 测试页面

```
路径: /dashboard/test-personalization
```

### 测试内容

- 主题切换测试
- 快捷操作栏测试
- 个人工作台测试
- 设置保存测试
- 设置导出导入测试

## 配置选项

### 主题配置

- `autoSwitch`: 是否自动切换主题
- `preferredTheme`: 首选主题类型
- `customTheme`: 自定义主题配置

### 快捷操作配置

- `enabled`: 是否启用快捷操作
- `position`: 显示位置
- `maxVisible`: 最大显示数量

### 工作台配置

- `layout`: 布局类型
- `defaultView`: 默认视图
- `recentItems`: 最近项目数量

## 权限控制

### 个性化设置权限

- `canManagePersonalization`: 管理个性化设置权限
- 普通用户只能修改自己的个性化设置
- 管理员可以管理所有用户的个性化设置

### 快捷操作权限

- 根据用户角色显示不同的快捷操作
- 管理员可以看到所有操作
- 普通用户只能看到有权限的操作

## 数据持久化

### 本地存储

- 使用 localStorage 保存个性化设置
- 设置自动保存到本地
- 支持设置导出和导入

### 数据格式

```json
{
  "theme": {
    "currentTheme": "light",
    "autoSwitch": false,
    "preferredTheme": "light"
  },
  "dashboard": {
    "layout": "grid",
    "widgets": [...],
    "workspaces": [...]
  },
  "quickActions": {
    "enabled": true,
    "position": "top",
    "actions": [...]
  }
}
```

## 响应式设计

### 移动端适配

- 快捷操作栏在移动端自动调整位置
- 工作台组件在移动端使用单列布局
- 主题预览在移动端优化显示

### 深色模式支持

- 所有组件都支持深色模式
- 主题切换时自动应用深色样式
- 保持良好的对比度和可读性

## 性能优化

### 组件懒加载

- 工作台组件按需加载
- 图表组件延迟渲染
- 减少初始加载时间

### 状态缓存

- 个性化设置状态缓存
- 避免重复加载数据
- 提升用户体验

## 扩展性

### 组件扩展

- 支持添加新的工作台组件
- 组件接口标准化
- 便于第三方组件集成

### 主题扩展

- 支持添加新的预设主题
- 主题配置标准化
- 支持主题插件机制

## 故障排除

### 常见问题

1. **主题切换不生效**

   - 检查浏览器缓存
   - 确认设置已保存
   - 刷新页面

2. **快捷操作不显示**

   - 检查权限设置
   - 确认快捷操作已启用
   - 检查显示位置设置

3. **工作台组件加载失败**
   - 检查组件文件是否存在
   - 确认组件配置正确
   - 查看控制台错误信息

### 调试方法

1. 打开浏览器开发者工具
2. 查看控制台错误信息
3. 检查 localStorage 中的设置
4. 使用测试页面验证功能

## 更新日志

### v1.0.0 (2024-01-XX)

- ✅ 实现基础主题定制功能
- ✅ 实现快捷操作栏
- ✅ 实现个人工作台
- ✅ 实现设置保存和导出
- ✅ 添加测试页面和文档

## 未来计划

### 短期计划

- [ ] 添加更多预设主题
- [ ] 优化移动端体验
- [ ] 添加更多工作台组件
- [ ] 实现设置同步功能

### 长期计划

- [ ] 支持主题市场
- [ ] 实现组件市场
- [ ] 添加 AI 推荐功能
- [ ] 支持多设备同步

---

**注意**: 本功能需要现代浏览器支持，建议使用 Chrome 80+、Firefox 75+、Safari 13+ 等浏览器。
